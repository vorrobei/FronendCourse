(()=>{"use strict";var t=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))},e=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},n=function(){function n(t){this._serverURL=t}return n.prototype.Get=function(n){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return t=this._serverURL+n,[4,fetch(t)];case 1:return[2,e.sent().json()]}}))}))},n.prototype.Post=function(n,r){return t(this,void 0,void 0,(function(){var t;return e(this,(function(e){switch(e.label){case 0:return t=this._serverURL+n,[4,fetch(t,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})];case 1:return[2,e.sent().json()]}}))}))},n}(),r=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))},o=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},i=function(){function t(t){this.quizID=0,this.title="",this.author="",this.questionIDs=Array(),this.questions=new Array,this.questionsWithCorrectAnswers=new Array,this._rest=t,this._currentID=-1}return t.prototype.StartQuiz=function(){return this._currentID=-1,this.questionsWithCorrectAnswers=[],!0},t.prototype.GetNextQuestion=function(){return this._currentID<this.questionIDs.length-1?(this._currentID++,this.questions[this._currentID]):null},t.prototype.CheckAnswer=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,this._rest.Post("/check_answer/",{questionID:t.id,answerID:e.id})];case 1:return(n=r.sent()).isCorrect&&this.questionsWithCorrectAnswers.push(t.id),[2,n]}}))}))},t.prototype.GetScores=function(){return this.questionsWithCorrectAnswers.length},t}(),s=function(){function t(t){this._rest=t}return t.prototype.GetQuizList=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._rest.Get("/quiz/")];case 1:return[2,t.sent()]}}))}))},t.prototype.GetQuiz=function(t){return r(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(o){switch(o.label){case 0:return[4,this._rest.Get("/quiz/"+t.toString()+"/")];case 1:return e=o.sent(),n=Object.assign(new i(this._rest),e),r=n,[4,this.GetQuizQuestions(n.questionIDs)];case 2:return r.questions=o.sent(),[2,n]}}))}))},t.prototype.GetQuizQuestions=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i;return o(this,(function(o){switch(o.label){case 0:for(e="?",n=0,r=t;n<r.length;n++)i=r[n],e+="id="+i.toString()+"&";return[4,this._rest.Get("/questions"+e)];case 1:return[2,o.sent()]}}))}))},t}(),u=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}c((r=r.apply(t,e||[])).next())}))},c=function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=e.call(t,s)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},l=function(){function t(t){var e,n,r,o=this;this.formSelector=".quiz-form",this.questionTextContainerSelector=".quiz-form__question-text",this.questionControlsContainerSelector=".question-controls",this.nextButtonSelector=".quiz-controls__button-next",this.formScoresSelector=".quiz-result",this.formScoresTextSelector=".score-container__text",this.playAgainButtonSelector=".quiz-controls__button-play-again",this._form=null,this._questionContainer=null,this._answersContainer=null,this._nextButton=null,this._formScores=null,this._formScoresText=null,this._playAgainButton=null,this._quiz=t,this._form=document.querySelector(this.formSelector),this._formScores=document.querySelector(this.formScoresSelector),null!==this._form&&(this._questionContainer=this._form.querySelector(this.questionTextContainerSelector),this._answersContainer=this._form.querySelector(this.questionControlsContainerSelector),this._nextButton=this._form.querySelector(this.nextButtonSelector),null===(e=this._nextButton)||void 0===e||e.addEventListener("click",(function(t){if(null!==o._form&&null!==o._formScores){var e=o._quiz.GetNextQuestion();null!==e?(o.ShowQuestion(e),o._form.style.display="flex",o._formScores.style.display="none"):(null!==o._formScoresText&&void 0!==o._formScoresText&&(o._formScoresText.innerHTML="Your scored "+o._quiz.GetScores()+" out of "+o._quiz.questionIDs.length),o._form.style.display="none",o._formScores.style.display="flex")}}))),null!==this._formScores&&(this._formScoresText=null===(n=this._formScores)||void 0===n?void 0:n.querySelector(this.formScoresTextSelector),this._playAgainButton=this._formScores.querySelector(this.playAgainButtonSelector),null===(r=this._playAgainButton)||void 0===r||r.addEventListener("click",(function(t){o.StartQuiz()})))}return t.prototype.StartQuiz=function(){var t;this._quiz.StartQuiz(),null===(t=this._nextButton)||void 0===t||t.click()},t.prototype.ShowQuestion=function(t){null!==t&&null!==this._questionContainer&&(this.ClearQuestion(),this.CreateQuestion(t))},t.prototype.CreateQuestion=function(t){var e,n=this,r=document.createElement("span");return r.classList.add("question-text__text"),r.innerHTML=t.text,null===(e=this._questionContainer)||void 0===e||e.appendChild(r),t.answers.forEach((function(e){var r,o=n.CreateAnswerButton(t,e);null===(r=n._answersContainer)||void 0===r||r.appendChild(o)})),r},t.prototype.CreateAnswerButton=function(t,e){var n=this,r=document.createElement("button");return r.type="button",r.classList.add("question-controls__button"),r.id=e.id.toString(),r.innerHTML=e.answer.replace(/</g,"&lt").replace(/>/g,"&gt"),r.addEventListener("click",(function(r){n.ShowAnswerResult(t,e)})),r},t.prototype.ShowAnswerResult=function(t,e){return u(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return null===this._answersContainer?[2]:[4,this._quiz.CheckAnswer(t,e)];case 1:return n=r.sent(),this._answersContainer.childNodes.forEach((function(t){var r=t;r.disabled=!0,r.id===e.id.toString()&&e.id!==n.correctID&&r.classList.add("question-controls__button_red"),r.id===n.correctID.toString()&&r.classList.add("question-controls__button_green")})),[2]}}))}))},t.prototype.ClearQuestion=function(){if(null!==this._questionContainer&&null!==this._questionContainer.lastChild&&null!==this._answersContainer&&null!==this._answersContainer.lastChild){for(;this._questionContainer.firstChild;)this._questionContainer.removeChild(this._questionContainer.lastChild);for(;this._answersContainer.firstChild;)this._answersContainer.removeChild(this._answersContainer.lastChild)}},t}();!function(){u(this,void 0,void 0,(function(){var t,e,r,o;return c(this,(function(i){switch(i.label){case 0:return t=[1,2],e=Math.floor(Math.random()*t.length+1),r=new n("http://localhost:3034"),[4,new s(r).GetQuiz(e)];case 1:return o=i.sent(),new l(o).StartQuiz(),[2]}}))}))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cyIsIndlYnBhY2s6Ly9mcm9udGV4NS8uL2Fzc2V0cy9zY3JpcHRzL3F1aXoudHMiLCJ3ZWJwYWNrOi8vZnJvbnRleDUvLi9hc3NldHMvc2NyaXB0cy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG52YXIgUmVzdFRvSlNPTlNlcnZlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSZXN0VG9KU09OU2VydmVyKHNlcnZlclVSTCkge1xuICAgICAgICB0aGlzLl9zZXJ2ZXJVUkwgPSBzZXJ2ZXJVUkw7XG4gICAgfVxuICAgIFJlc3RUb0pTT05TZXJ2ZXIucHJvdG90eXBlLkdldCA9IGZ1bmN0aW9uIChnZXRVUkwpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVuZFBvaW50VVJMO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kUG9pbnRVUkwgPSB0aGlzLl9zZXJ2ZXJVUkwgKyBnZXRVUkw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaChlbmRQb2ludFVSTCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCAoX2Euc2VudCgpKS5qc29uKCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlc3RUb0pTT05TZXJ2ZXIucHJvdG90eXBlLlBvc3QgPSBmdW5jdGlvbiAocG9zdFVybCwgZGF0YSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZW5kUG9pbnRVUkw7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRQb2ludFVSTCA9IHRoaXMuX3NlcnZlclVSTCArIHBvc3RVcmw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaChlbmRQb2ludFVSTCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzIgLypyZXR1cm4qLywgKF9hLnNlbnQoKSkuanNvbigpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUmVzdFRvSlNPTlNlcnZlcjtcbn0oKSk7XG5leHBvcnQgeyBSZXN0VG9KU09OU2VydmVyIH07XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKGcgJiYgKGcgPSAwLCBvcFswXSAmJiAoXyA9IDApKSwgXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG4vLyBkdG8gY2xhc3MgZm9yIHF1aXogYW5zd2VyJ3MgcmVzdWx0XG52YXIgUXVpekFuc3dlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBRdWl6QW5zd2VyUmVzdWx0KCkge1xuICAgICAgICB0aGlzLmlzQ29ycmVjdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNvcnJlY3RJRCA9IC0xO1xuICAgIH1cbiAgICByZXR1cm4gUXVpekFuc3dlclJlc3VsdDtcbn0oKSk7XG5leHBvcnQgeyBRdWl6QW5zd2VyUmVzdWx0IH07XG4vLyBkdG8gY2xhc3MgZm9yIHF1aXogYW5zd2Vyc1xudmFyIFF1aXpBbnN3ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVpekFuc3dlcigpIHtcbiAgICAgICAgdGhpcy5pZCA9IDA7XG4gICAgICAgIHRoaXMuYW5zd2VyID0gXCJcIjtcbiAgICB9XG4gICAgcmV0dXJuIFF1aXpBbnN3ZXI7XG59KCkpO1xuZXhwb3J0IHsgUXVpekFuc3dlciB9O1xuLy8gZHRvIGNsYXNzIGZvciBxdWl6IHF1ZXN0aW9uc1xudmFyIFF1aXpRdWVzdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBRdWl6UXVlc3Rpb24oKSB7XG4gICAgICAgIHRoaXMuaWQgPSAwO1xuICAgICAgICB0aGlzLnRleHQgPSBcIlwiO1xuICAgICAgICB0aGlzLmFuc3dlcnMgPSBuZXcgQXJyYXkoKTtcbiAgICB9XG4gICAgcmV0dXJuIFF1aXpRdWVzdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBRdWl6UXVlc3Rpb24gfTtcbnZhciBRdWl6ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFF1aXoocmVzdCkge1xuICAgICAgICB0aGlzLnF1aXpJRCA9IDA7XG4gICAgICAgIHRoaXMudGl0bGUgPSBcIlwiO1xuICAgICAgICB0aGlzLmF1dGhvciA9IFwiXCI7XG4gICAgICAgIHRoaXMucXVlc3Rpb25JRHMgPSBBcnJheSgpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9ucyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uc1dpdGhDb3JyZWN0QW5zd2VycyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB0aGlzLl9yZXN0ID0gcmVzdDtcbiAgICAgICAgdGhpcy5fY3VycmVudElEID0gLTE7XG4gICAgfVxuICAgIFF1aXoucHJvdG90eXBlLlN0YXJ0UXVpeiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudElEID0gLTE7XG4gICAgICAgIHRoaXMucXVlc3Rpb25zV2l0aENvcnJlY3RBbnN3ZXJzID0gW107XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgUXVpei5wcm90b3R5cGUuR2V0TmV4dFF1ZXN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudElEIDwgdGhpcy5xdWVzdGlvbklEcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50SUQrKztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uc1t0aGlzLl9jdXJyZW50SURdO1xuICAgICAgICAgICAgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgUXVpei5wcm90b3R5cGUuQ2hlY2tBbnN3ZXIgPSBmdW5jdGlvbiAocXVlc3Rpb24sIGFuc3dlcikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9yZXN0LlBvc3QoXCIvY2hlY2tfYW5zd2VyL1wiLCB7IFwicXVlc3Rpb25JRFwiOiBxdWVzdGlvbi5pZCwgXCJhbnN3ZXJJRFwiOiBhbnN3ZXIuaWQgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmlzQ29ycmVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zV2l0aENvcnJlY3RBbnN3ZXJzLnB1c2gocXVlc3Rpb24uaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUXVpei5wcm90b3R5cGUuR2V0U2NvcmVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbnNXaXRoQ29ycmVjdEFuc3dlcnMubGVuZ3RoO1xuICAgIH07XG4gICAgcmV0dXJuIFF1aXo7XG59KCkpO1xuZXhwb3J0IHsgUXVpeiB9O1xudmFyIFF1aXpGYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFF1aXpGYWN0b3J5KHJlc3QpIHtcbiAgICAgICAgdGhpcy5fcmVzdCA9IHJlc3Q7XG4gICAgfVxuICAgIFF1aXpGYWN0b3J5LnByb3RvdHlwZS5HZXRRdWl6TGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbmNlO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9yZXN0LkdldCgnL3F1aXovJyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25jZSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCByZXNwb25jZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUXVpekZhY3RvcnkucHJvdG90eXBlLkdldFF1aXogPSBmdW5jdGlvbiAocXVpeklEKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBxdWl6RGF0YSwgcXVpeiwgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuX3Jlc3QuR2V0KCcvcXVpei8nICsgcXVpeklELnRvU3RyaW5nKCkgKyAnLycpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcXVpekRhdGEgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWl6ID0gT2JqZWN0LmFzc2lnbihuZXcgUXVpeih0aGlzLl9yZXN0KSwgcXVpekRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBxdWl6O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5HZXRRdWl6UXVlc3Rpb25zKHF1aXoucXVlc3Rpb25JRHMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EucXVlc3Rpb25zID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHF1aXpdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFF1aXpGYWN0b3J5LnByb3RvdHlwZS5HZXRRdWl6UXVlc3Rpb25zID0gZnVuY3Rpb24gKHF1ZXN0aW9uc0lEcykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcXVlc3Rpb25zRmlsdGVyLCBfaSwgcXVlc3Rpb25zSURzXzEsIHFJRCwgcmVzcG9uY2U7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbnNGaWx0ZXIgPSBcIj9cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoX2kgPSAwLCBxdWVzdGlvbnNJRHNfMSA9IHF1ZXN0aW9uc0lEczsgX2kgPCBxdWVzdGlvbnNJRHNfMS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxSUQgPSBxdWVzdGlvbnNJRHNfMVtfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25zRmlsdGVyICs9IFwiaWQ9XCIgKyBxSUQudG9TdHJpbmcoKSArIFwiJlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5fcmVzdC5HZXQoJy9xdWVzdGlvbnMnICsgcXVlc3Rpb25zRmlsdGVyKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbmNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc3BvbmNlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gUXVpekZhY3Rvcnk7XG59KCkpO1xuZXhwb3J0IHsgUXVpekZhY3RvcnkgfTtcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoZyAmJiAoZyA9IDAsIG9wWzBdICYmIChfID0gMCkpLCBfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbmltcG9ydCB7IFJlc3RUb0pTT05TZXJ2ZXIgfSBmcm9tIFwiLi9yZXN0XCI7XG5pbXBvcnQgeyBRdWl6RmFjdG9yeSB9IGZyb20gXCIuL3F1aXpcIjtcbnZhciBRdWl6Rm9ybUNvbnRyb2xsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUXVpekZvcm1Db250cm9sbGVyKHF1aXopIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHRoaXMuZm9ybVNlbGVjdG9yID0gJy5xdWl6LWZvcm0nO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uVGV4dENvbnRhaW5lclNlbGVjdG9yID0gJy5xdWl6LWZvcm1fX3F1ZXN0aW9uLXRleHQnO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uQ29udHJvbHNDb250YWluZXJTZWxlY3RvciA9ICcucXVlc3Rpb24tY29udHJvbHMnO1xuICAgICAgICB0aGlzLm5leHRCdXR0b25TZWxlY3RvciA9ICcucXVpei1jb250cm9sc19fYnV0dG9uLW5leHQnO1xuICAgICAgICB0aGlzLmZvcm1TY29yZXNTZWxlY3RvciA9ICcucXVpei1yZXN1bHQnO1xuICAgICAgICB0aGlzLmZvcm1TY29yZXNUZXh0U2VsZWN0b3IgPSAnLnNjb3JlLWNvbnRhaW5lcl9fdGV4dCc7XG4gICAgICAgIHRoaXMucGxheUFnYWluQnV0dG9uU2VsZWN0b3IgPSAnLnF1aXotY29udHJvbHNfX2J1dHRvbi1wbGF5LWFnYWluJztcbiAgICAgICAgdGhpcy5fZm9ybSA9IG51bGw7XG4gICAgICAgIHRoaXMuX3F1ZXN0aW9uQ29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYW5zd2Vyc0NvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIHRoaXMuX25leHRCdXR0b24gPSBudWxsO1xuICAgICAgICB0aGlzLl9mb3JtU2NvcmVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZm9ybVNjb3Jlc1RleHQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wbGF5QWdhaW5CdXR0b24gPSBudWxsO1xuICAgICAgICB0aGlzLl9xdWl6ID0gcXVpejtcbiAgICAgICAgLy8gZ2V0IGZvcm1zXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuZm9ybVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fZm9ybVNjb3JlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5mb3JtU2NvcmVzU2VsZWN0b3IpO1xuICAgICAgICAvLyBnZXQgYW5kIHNldHVwIHF1aXogZm9ybSdzIGVsZW1lbnRzXG4gICAgICAgIGlmICh0aGlzLl9mb3JtICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9xdWVzdGlvbkNvbnRhaW5lciA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLnF1ZXN0aW9uVGV4dENvbnRhaW5lclNlbGVjdG9yKTtcbiAgICAgICAgICAgIHRoaXMuX2Fuc3dlcnNDb250YWluZXIgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5xdWVzdGlvbkNvbnRyb2xzQ29udGFpbmVyU2VsZWN0b3IpO1xuICAgICAgICAgICAgdGhpcy5fbmV4dEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLm5leHRCdXR0b25TZWxlY3Rvcik7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLl9uZXh0QnV0dG9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fZm9ybSA9PT0gbnVsbCB8fCBfdGhpcy5fZm9ybVNjb3JlcyA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0UXVlc3Rpb24gPSBfdGhpcy5fcXVpei5HZXROZXh0UXVlc3Rpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFF1ZXN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLlNob3dRdWVzdGlvbihuZXh0UXVlc3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZm9ybS5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLl9mb3JtU2NvcmVzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fZm9ybVNjb3Jlc1RleHQgIT09IG51bGwgJiYgX3RoaXMuX2Zvcm1TY29yZXNUZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9mb3JtU2NvcmVzVGV4dC5pbm5lckhUTUwgPSBcIllvdXIgc2NvcmVkIFwiICsgX3RoaXMuX3F1aXouR2V0U2NvcmVzKCkgKyBcIiBvdXQgb2YgXCIgKyBfdGhpcy5fcXVpei5xdWVzdGlvbklEcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2Zvcm0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fZm9ybVNjb3Jlcy5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2V0IGFuZCBzZXR1cCByZXN1bHQgZm9ybSdzIGVsZW1lbnRzXG4gICAgICAgIGlmICh0aGlzLl9mb3JtU2NvcmVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtU2NvcmVzVGV4dCA9IChfYiA9IHRoaXMuX2Zvcm1TY29yZXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5xdWVyeVNlbGVjdG9yKHRoaXMuZm9ybVNjb3Jlc1RleHRTZWxlY3Rvcik7XG4gICAgICAgICAgICB0aGlzLl9wbGF5QWdhaW5CdXR0b24gPSB0aGlzLl9mb3JtU2NvcmVzLnF1ZXJ5U2VsZWN0b3IodGhpcy5wbGF5QWdhaW5CdXR0b25TZWxlY3Rvcik7XG4gICAgICAgICAgICAoX2MgPSB0aGlzLl9wbGF5QWdhaW5CdXR0b24pID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuU3RhcnRRdWl6KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyByZXNldCBxdWl6IHRvIHN0YXJ0XG4gICAgUXVpekZvcm1Db250cm9sbGVyLnByb3RvdHlwZS5TdGFydFF1aXogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5fcXVpei5TdGFydFF1aXooKTtcbiAgICAgICAgKF9hID0gdGhpcy5fbmV4dEJ1dHRvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsaWNrKCk7XG4gICAgfTtcbiAgICAvLyBzaG93IHF1ZXN0aW9uIGFuZCByZXN1bHQgb24gZm9ybVxuICAgIFF1aXpGb3JtQ29udHJvbGxlci5wcm90b3R5cGUuU2hvd1F1ZXN0aW9uID0gZnVuY3Rpb24gKHF1ZXN0aW9uKSB7XG4gICAgICAgIGlmIChxdWVzdGlvbiA9PT0gbnVsbCB8fCB0aGlzLl9xdWVzdGlvbkNvbnRhaW5lciA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gZGVsZXRlIGJ1dHRvbnNcbiAgICAgICAgdGhpcy5DbGVhclF1ZXN0aW9uKCk7XG4gICAgICAgIC8vIGJpbmQgYnV0dG9ucyBhbmQgYW5zd2VycyAgICAgICAgXG4gICAgICAgIHRoaXMuQ3JlYXRlUXVlc3Rpb24ocXVlc3Rpb24pO1xuICAgIH07XG4gICAgLy8gc2V0dXAgbmV3IHF1ZXN0aW9uIHRleHQgYW5kIGNyZWF0ZSBidXR0b25zIGZvciBhbnN3ZXJzXG4gICAgUXVpekZvcm1Db250cm9sbGVyLnByb3RvdHlwZS5DcmVhdGVRdWVzdGlvbiA9IGZ1bmN0aW9uIChxdWVzdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBxLmNsYXNzTGlzdC5hZGQoJ3F1ZXN0aW9uLXRleHRfX3RleHQnKTtcbiAgICAgICAgcS5pbm5lckhUTUwgPSBxdWVzdGlvbi50ZXh0O1xuICAgICAgICAoX2EgPSB0aGlzLl9xdWVzdGlvbkNvbnRhaW5lcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFwcGVuZENoaWxkKHEpO1xuICAgICAgICBxdWVzdGlvbi5hbnN3ZXJzLmZvckVhY2goZnVuY3Rpb24gKGFuc3dlcikge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IF90aGlzLkNyZWF0ZUFuc3dlckJ1dHRvbihxdWVzdGlvbiwgYW5zd2VyKTtcbiAgICAgICAgICAgIChfYSA9IF90aGlzLl9hbnN3ZXJzQ29udGFpbmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBxO1xuICAgIH07XG4gICAgLy8gY3JlYXRlIG5ldyBidXR0b24gYW5kIGJpbmQgaXQgdG8gYW5zd2VyXG4gICAgUXVpekZvcm1Db250cm9sbGVyLnByb3RvdHlwZS5DcmVhdGVBbnN3ZXJCdXR0b24gPSBmdW5jdGlvbiAocXVlc3Rpb24sIGFuc3dlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50eXBlID0gJ2J1dHRvbic7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdxdWVzdGlvbi1jb250cm9sc19fYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi5pZCA9IGFuc3dlci5pZC50b1N0cmluZygpO1xuICAgICAgICBidXR0b24uaW5uZXJIVE1MID0gYW5zd2VyLmFuc3dlci5yZXBsYWNlKC88L2csICcmbHQnKS5yZXBsYWNlKC8+L2csICcmZ3QnKTtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIF90aGlzLlNob3dBbnN3ZXJSZXN1bHQocXVlc3Rpb24sIGFuc3dlcik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH07XG4gICAgLy8gc2hvdyBhbnN3ZXJzIHN0YXR1c1xuICAgIFF1aXpGb3JtQ29udHJvbGxlci5wcm90b3R5cGUuU2hvd0Fuc3dlclJlc3VsdCA9IGZ1bmN0aW9uIChxdWVzdGlvbiwgYW5zd2VyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhbnN3ZXJSZXN1bHQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYW5zd2Vyc0NvbnRhaW5lciA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9xdWl6LkNoZWNrQW5zd2VyKHF1ZXN0aW9uLCBhbnN3ZXIpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgYW5zd2VyUmVzdWx0ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYW5zd2Vyc0NvbnRhaW5lci5jaGlsZE5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIGFsbCBidXR0b25zIGFmdGVyIHJlY2lldmUgYW5zd2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnV0dG9uLmlkID09PSBhbnN3ZXIuaWQudG9TdHJpbmcoKSAmJiBhbnN3ZXIuaWQgIT09IGFuc3dlclJlc3VsdC5jb3JyZWN0SUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3F1ZXN0aW9uLWNvbnRyb2xzX19idXR0b25fcmVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXR0b24uaWQgPT09IGFuc3dlclJlc3VsdC5jb3JyZWN0SUQudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgncXVlc3Rpb24tY29udHJvbHNfX2J1dHRvbl9ncmVlbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vIGRlbGV0ZSBhbGwgZm9ybSdzIGNvbXBvbmVudCBmb3IgY3VycmVudCBxdWVzdGlvblxuICAgIFF1aXpGb3JtQ29udHJvbGxlci5wcm90b3R5cGUuQ2xlYXJRdWVzdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXN0aW9uQ29udGFpbmVyID09PSBudWxsIHx8IHRoaXMuX3F1ZXN0aW9uQ29udGFpbmVyLmxhc3RDaGlsZCA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgdGhpcy5fYW5zd2Vyc0NvbnRhaW5lciA9PT0gbnVsbCB8fCB0aGlzLl9hbnN3ZXJzQ29udGFpbmVyLmxhc3RDaGlsZCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgd2hpbGUgKHRoaXMuX3F1ZXN0aW9uQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIHRoaXMuX3F1ZXN0aW9uQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3F1ZXN0aW9uQ29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRoaXMuX2Fuc3dlcnNDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgdGhpcy5fYW5zd2Vyc0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9hbnN3ZXJzQ29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBRdWl6Rm9ybUNvbnRyb2xsZXI7XG59KCkpO1xuLy8gZW50cnkgcG9pbnRcbmZ1bmN0aW9uIG1haW4oKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VydmVyVVJMLCBxdWl6SURzLCBxdWl6SUQsIHJlc3QsIHF1aXpGYWN0b3J5LCBxdWl6LCBmb3JtQ29udHJvbGxlcjtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyVVJMID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMzRcIjtcbiAgICAgICAgICAgICAgICAgICAgcXVpeklEcyA9IFsxLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgcXVpeklEID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIHF1aXpJRHMubGVuZ3RoKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXN0ID0gbmV3IFJlc3RUb0pTT05TZXJ2ZXIoc2VydmVyVVJMKTtcbiAgICAgICAgICAgICAgICAgICAgcXVpekZhY3RvcnkgPSBuZXcgUXVpekZhY3RvcnkocmVzdCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHF1aXpGYWN0b3J5LkdldFF1aXoocXVpeklEKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBxdWl6ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBmb3JtQ29udHJvbGxlciA9IG5ldyBRdWl6Rm9ybUNvbnRyb2xsZXIocXVpeik7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1Db250cm9sbGVyLlN0YXJ0UXVpeigpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8gZW50cnkgcG9pbnRcbm1haW4oKTtcbiJdLCJuYW1lcyI6WyJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsIlAiLCJnZW5lcmF0b3IiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiX19nZW5lcmF0b3IiLCJib2R5IiwiZiIsInkiLCJ0IiwiZyIsIl8iLCJsYWJlbCIsInNlbnQiLCJ0cnlzIiwib3BzIiwidmVyYiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidGhpcyIsIm4iLCJ2Iiwib3AiLCJUeXBlRXJyb3IiLCJjYWxsIiwicG9wIiwibGVuZ3RoIiwicHVzaCIsIlJlc3RUb0pTT05TZXJ2ZXIiLCJzZXJ2ZXJVUkwiLCJfc2VydmVyVVJMIiwicHJvdG90eXBlIiwiR2V0IiwiZ2V0VVJMIiwiZW5kUG9pbnRVUkwiLCJfYSIsImZldGNoIiwianNvbiIsIlBvc3QiLCJwb3N0VXJsIiwiZGF0YSIsIm1ldGhvZCIsImhlYWRlcnMiLCJKU09OIiwic3RyaW5naWZ5IiwiUXVpeiIsInJlc3QiLCJxdWl6SUQiLCJ0aXRsZSIsImF1dGhvciIsInF1ZXN0aW9uSURzIiwiQXJyYXkiLCJxdWVzdGlvbnMiLCJxdWVzdGlvbnNXaXRoQ29ycmVjdEFuc3dlcnMiLCJfcmVzdCIsIl9jdXJyZW50SUQiLCJTdGFydFF1aXoiLCJHZXROZXh0UXVlc3Rpb24iLCJDaGVja0Fuc3dlciIsInF1ZXN0aW9uIiwiYW5zd2VyIiwicmVzIiwiaWQiLCJpc0NvcnJlY3QiLCJHZXRTY29yZXMiLCJRdWl6RmFjdG9yeSIsIkdldFF1aXpMaXN0IiwiR2V0UXVpeiIsInF1aXpEYXRhIiwicXVpeiIsIl9iIiwidG9TdHJpbmciLCJPYmplY3QiLCJhc3NpZ24iLCJHZXRRdWl6UXVlc3Rpb25zIiwicXVlc3Rpb25zSURzIiwicXVlc3Rpb25zRmlsdGVyIiwiX2kiLCJxdWVzdGlvbnNJRHNfMSIsInFJRCIsIlF1aXpGb3JtQ29udHJvbGxlciIsIl9jIiwiX3RoaXMiLCJmb3JtU2VsZWN0b3IiLCJxdWVzdGlvblRleHRDb250YWluZXJTZWxlY3RvciIsInF1ZXN0aW9uQ29udHJvbHNDb250YWluZXJTZWxlY3RvciIsIm5leHRCdXR0b25TZWxlY3RvciIsImZvcm1TY29yZXNTZWxlY3RvciIsImZvcm1TY29yZXNUZXh0U2VsZWN0b3IiLCJwbGF5QWdhaW5CdXR0b25TZWxlY3RvciIsIl9mb3JtIiwiX3F1ZXN0aW9uQ29udGFpbmVyIiwiX2Fuc3dlcnNDb250YWluZXIiLCJfbmV4dEJ1dHRvbiIsIl9mb3JtU2NvcmVzIiwiX2Zvcm1TY29yZXNUZXh0IiwiX3BsYXlBZ2FpbkJ1dHRvbiIsIl9xdWl6IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5leHRRdWVzdGlvbiIsIlNob3dRdWVzdGlvbiIsInN0eWxlIiwiZGlzcGxheSIsInVuZGVmaW5lZCIsImlubmVySFRNTCIsImNsaWNrIiwiQ2xlYXJRdWVzdGlvbiIsIkNyZWF0ZVF1ZXN0aW9uIiwicSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0IiwiYXBwZW5kQ2hpbGQiLCJhbnN3ZXJzIiwiZm9yRWFjaCIsImJ1dHRvbiIsIkNyZWF0ZUFuc3dlckJ1dHRvbiIsInR5cGUiLCJyZXBsYWNlIiwiU2hvd0Fuc3dlclJlc3VsdCIsImFuc3dlclJlc3VsdCIsImNoaWxkTm9kZXMiLCJub2RlIiwiZGlzYWJsZWQiLCJjb3JyZWN0SUQiLCJsYXN0Q2hpbGQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJxdWl6SURzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibWFpbiJdLCJzb3VyY2VSb290IjoiIn0=